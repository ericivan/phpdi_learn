- [安装](####安装)

- [基本使用](####基本使用)







#### 安装

> composer require php-di/php-di



#### 基本使用

> 现在有一个Class Mail，一个Class UserManager，我们把Mail依赖注入到 UserManager中，基本写法如下



```php
class Mailer
{
    public function mail($recipient, $content)
    {
        // send an email to the recipient
    }
}
```



```php
class UserManager
{
    private $mailer;

    public function __construct(Mailer $mailer)
    {
        $this->mailer = $mailer;
    }

    public function register($email, $password)
    {
        $this->mailer->mail($email, 'Hello and welcome!');
    }
}

$mailer = new Mailer();
$userManager = new UserManager($mailer);
```

上面代码中最后两行使我们依赖注入的使用，现在我们利用php-di库进行注入

```Php
$container=new Container();

$builer=new DI\ContainerBuiler();

$builder->addDefinitions([
    'UserManager' => \DI\create(\Modern\Di\UserManager::class)
        ->constructor(\DI\get('Mailer')),
    'Mailer'=>\DI\factory(function () {
        return new \Modern\Di\Mailer();
    })
]);

$container = $builder->build();

//获取对象
$userManager=$container->get('UserManager');
```

这段代码中，通过addDefinitions方法进行绑定，get方法获取到注入的对象，mailer对象已经在方法前面进行了注入，获取到容器对象的时候无需再次创建注入对象，十分方便



